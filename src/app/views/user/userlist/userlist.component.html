<c-row ngPreserveWhitespaces>
  <c-col xs="12">
    <!-- <app-docs-callout href="components/table" name="Table"></app-docs-callout> -->
  </c-col>
  <c-col xs="12">

    <div class="search-element">

      <div class="searchby">
        <select aria-label="Default select example" cSelect (change)="changeSearchType($event,'searchby')" >
          <option value="">Select Type</option>
          <option [value]="search.value" *ngFor="let search of searchByValue">{{search.name}}</option>
        </select>

        <div class="error">
          <p *ngIf="display_error">Select Type</p>
        </div>

      </div>

      <div class="searchval">

        <input cFormControl placeholder="Search" type="text" (input)="changeSearchType($event,'searchval')" *ngIf="searchType!='status'" [(ngModel)]="searchVal" />

        <select aria-label="Default select example" cSelect (change)="changeSearchType($event,'searchval')" *ngIf="searchType=='status'" [(ngModel)]="searchVal">
          <option value="">Select Status</option>
          <option [value]="data.value" *ngFor="let data of statusData">{{data.name}}</option>
        </select>

      </div>

      <div class="searchbutton">
          <button cButton class="me-1" (click)="getList()">
            Search
          </button>
     </div>
</div>


    <c-card class="mb-4">
      <c-card-header>
        <div class="sub-head">
          <strong>Sub Admin List</strong>

          <a (click)="downloadData()" class="orange-btn"><i class="bi bi-download"></i>
            in Excel
          </a>


          <button cButton class="me-1" routerLink="/user/adduser">
            Add Sub Admin
          </button>
        </div>
        <!-- <small>Basic example</small> -->
      </c-card-header>
      <c-card-body>


        <table cTable>
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col">Phone</th>
              <th scope="col">Email</th>
              <th scope="col">Role</th>
              <th scope="col">Status</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of userList;let i = index;">
              <th scope="row">{{((activePage-1)*recordsPerPage)+(i+1)}}</th>
              <td>{{user?.name}}</td>
              <td>{{user?.phone}}</td>
              <td>{{user?.email}}</td>
              <td>{{user?.Role[0]?.name}}</td>
              <td><a (click)="changeStatus(user._id, i)">
                      <span *ngIf="user.status==false" class="text-inactive">Inactive</span>
                      <span *ngIf="user.status!=false" class="text-active">Active</span>
                 </a>
              </td>
              <td>
                <em *ngIf="loginRights[1]?.resource === 'users'">
                  <a (click)="viewUser(user._id)" *ngIf="loginRights[1]?.access?.read" title="View"><i class="bi bi-eye"></i></a>
                  <a (click)="editUser(user._id,'editor')" *ngIf="loginRights[1]?.access?.update" title="Edit"><i class="bi bi-pencil"></i></a>
                  <!-- <a routerLink="/user/edituser" *ngIf="">Edit</a> -->
                  <a (click)="deleteUser(user._id)" *ngIf="loginRights[1]?.access?.delete" title="Delete"><i class="bi bi-trash"></i></a>
                </em>
                <em *ngIf="loginRights[0]?.access?.full">
                  <a (click)="viewUser(user._id)" title="View"><i class="bi bi-eye"></i></a>
                  <a (click)="editUser(user._id,'editor')" title="Edit"><i class="bi bi-pencil"></i></a>
                  <!-- <a routerLink="/user/edituser" *ngIf="">Edit</a> -->
                  <a (click)="deleteUser(user._id)" title="Delete"><i class="bi bi-trash"></i></a>
                </em>
              </td>
            </tr>
          </tbody>
        </table>
        <!-- </app-docs-example> -->

        <!-- <c-modal
            [keyboard]="false"
            [transition]="false"
            backdrop="static"
            class="position-static d-block show"
            id="modalStatic"
            #alertTemplate
          >
            <c-modal-header>
              <h5 cModalTitle>Delete</h5>
              <button cButtonClose></button>
            </c-modal-header>
            <c-modal-body>Modal body text goes here.</c-modal-body>
            <c-modal-footer>
              <button cButton color="secondary">Close</button>
              <button cButton color="primary">Save changes</button>
            </c-modal-footer>
          </c-modal> -->


      </c-card-body>
      <c-card-footer *ngIf="userList.length > 0">
        <app-pagination [totalRecords]="totalRecords" [recordsPerPage]="recordsPerPage"
          (onPageChange)="getList($event)">
        </app-pagination>
      </c-card-footer>
    </c-card>
  </c-col>
</c-row>
